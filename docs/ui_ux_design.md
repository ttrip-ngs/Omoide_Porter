# UI/UX設計

## 1. GUI (Graphical User Interface)

GUIは、直感的でわかりやすい操作性を提供することを目標とします。

- **メイン画面構成案**:
    1.  **ソース選択エリア**: コピー元のフォルダやデバイスを選択します。
        - **フォルダ選択**: 従来のフォルダブラウザ
        - **デバイス選択**: 接続されたUSBデバイス一覧
            - デバイスアイコン（iPhone、Android、Camera等）
            - デバイス名、モデル名、容量情報
            - 接続状態（利用可能、認証待ち、エラー等）のステータス表示
            - 自動検出のON/OFF切り替え
    2.  **デスティネーション選択エリア**: コピー先のフォルダを選択します。
    3.  **プリセット管理エリア**: プリセットの選択、作成、編集、削除を行います。
        - フォルダ構造設定UI: ドラッグ＆ドロップや選択肢で、フォルダ階層を組み立てられるようにします。リアルタイムプレビューを表示します。
        - ファイル名設定UI: 同様に、命名規則を組み立てられるようにし、プレビューを表示します。
        - 重複処理、関連ファイル設定などのオプション設定。
    4.  **ファイルリストエリア**: スキャンされたファイルの一覧、メタデータ情報、コピー後のパス予測などを表示します。個別のファイルを選択/非選択できるようにします。
    5.  **処理実行エリア**: コピー開始ボタン、進捗バー、ログ表示エリアを配置します。
        - デバイス接続時の特別な表示（転送速度、デバイス容量、切断警告等）
- **操作フロー例 (プリセット利用時)**:
    1. アプリケーション起動。
    2. プリセットを選択。
    3. ソースフォルダまたはデバイスを指定。
    4. （必要であれば）デスティネーションフォルダを変更。
    5. 「スキャン」または「プレビュー」を実行し、ファイルリストとコピー結果予測を確認。
    6. 「コピー開始」を実行。
- **操作フロー例 (新規設定時)**:
    1. ソースフォルダまたはデバイス、デスティネーションフォルダを指定。
    2. フォルダ構造ルール、ファイル名ルール、その他オプションを設定。
    3. （任意）設定を新しいプリセットとして保存。
    4. 「スキャン」または「プレビュー」を実行。
    5. 「コピー開始」を実行。
- **デバイス接続時の特別なフロー**:
    1. デバイス接続検出時の通知表示。
    2. 認証が必要な場合（iPhone等）の案内表示。
    3. デバイス固有のフォルダ選択（DCIM、Photos等）。
    4. 処理中の切断検出とエラーハンドリング。
- **その他考慮事項**:
    - 進捗状況の明確な表示（全体進捗、個別ファイル進捗、残り時間予測など）。
    - エラー発生時の分かりやすい通知と、可能な対処法の提示。
    - 設定のエクスポート/インポート機能。
    - デバイス接続/切断のリアルタイム監視と状態表示。

## 2. CUI (Command User Interface)

CUIは、自動化やバッチ処理を主眼に置き、シンプルなコマンド体系を提供します。

- **基本コマンド形式**:
  ```bash
  video_copy_tool [options] --source <source_path> --destination <destination_path>
  video_copy_tool --preset <preset_name> [options]
  video_copy_tool --config <config_file_path> [options]
  ```
- **主なオプション** (詳細は `features.md` のCUIの項を参照):
    - `--source <path>`
    - `--destination <path>`
    - `--device <device_name>` (デバイス名指定)
    - `--device-id <device_id>` (デバイスID指定)
    - `--list-devices` (接続デバイス一覧表示)
    - `--preset <name>`
    - `--config <filepath>`
    - `--folder-structure "{year}/{month}/{day}"` (プリセットを使わない場合の詳細指定)
    - `--filename-pattern "{datetime}_{original_filename}"` (同上)
    - `--duplicate-handling <skip|overwrite|rename>`
    - `--log-level <debug|info|warn|error>`
    - `--dry-run`
    - `--yes` (確認プロンプトを全てスキップ)
    - `--help`
    - `--version`
- **出力**: 
    - 標準出力には、処理の進捗やサマリーを表示します。
    - 標準エラー出力には、エラーメッセージや警告を表示します。
    - 詳細なログはファイルに出力するオプションも提供します。
- **対話モード**: オプションで簡単な対話モードを提供し、設定を順次入力させることも検討可能です（主にCUIに慣れていないユーザー向け）。

## 3. アクセシビリティとユーザビリティ

- **アクセシビリティ対応**:
    - **キーボードナビゲーション**: 全ての機能をマウス無しでキーボードのみで操作できるようにします
    - **スクリーンリーダー対応**: 画面読み上げソフトウェアと互換性のあるラベル付けとAria属性を実装します
    - **コントラスト**: WCAG 2.1 AAレベル以上のカラーコントラストを確保します
    - **フォントサイズ**: システムのフォントサイズ設定を尊重し、拡大縮小に対応します
- **ユーザビリティ向上**:
    - **直感的なアイコン**: 一般的に認識されるアイコン（フォルダ、コピー、設定など）を使用します
    - **ツールチップ**: ボタンや設定項目にわかりやすい説明を提供します
    - **ショートカットキー**: よく使用する機能には適切なキーボードショートカットを設定します
    - **状態の明確化**: 現在の処理状況、設定の有効/無効状態を視覚的に明確にします
    - **エラー時のガイダンス**: エラー発生時に、問題の原因と解決方法を分かりやすく提示します
- **パフォーマンス配慮**:
    - **応答性**: UIの応答速度を維持するため、重い処理は別スレッドで実行します
    - **メモリ使用量**: 大量のファイルを扱う際も、適切なメモリ管理を行います
    - **リアルタイム更新**: 進捗状況やファイルリストの更新を適切な頻度で行います 